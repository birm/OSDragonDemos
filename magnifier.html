<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.3.0/openseadragon.min.js"></script>
  <style>
  .invisible{
    display:none;
  }
  </style>
</head>
<body>
  <div id="head">
    <p>Use a modal in the same window as a magnifier. Press m to show/hide.</p>
  </div>
  <div id="about"></div>
  <div id="windows">
    <div id="first" style="width:100%;height:1500px;"></div>
  </div>
  <div id="second" style="width: 20%; height: 200px; border:5px solid black; border-radius: 5px;"></div>

  <script src="two_init.js"></script>
  <script src="packages/sw_magnifier.js"></script>
  <script>
  window.setTimeout(sw_magnifier(viewer1, viewer2),500);
  window.onkeypress = function(event) {
    if (event.keyCode == 77 || event.key == "m") {
      document.getElementById('second').classList.toggle('invisible');
    }
  }
  </script>
  <script>
  var spy_modal = document.getElementById('second');
  var PrefMan = new ClientPrefManager("spyglass");
  // on a new press, do the following...
  window.onkeypress = function(event) {
      // get existing settings
      var prefs = {};
      PrefMan.get_pref("modal_settings", (x) => {prefs=x});
      // handle input
      if (event.keyCode == 122 || event.key == "z") {
        // set zoom level
      }
      else if (event.keyCode == 87 || event.key == "w") {
        // set width
      }
      else if (event.keyCode == 72 || event.key == "h") {
        // set height
      }
      set_spyglass_settings(prefs);
  }
  // Set variables
  var set_spyglass_settings = function(e) {
      console.log(e);
      if (e) {
          spy_modal.style.width=e.width;
          spy_modal.style.height=e.height;
          document.getElementById(modal_viewer.id)['zoomlevel'] = e.zoom;
      }
  };
  PrefMan.get_pref("modal_settings", set_spyglass_settings);
  </script>
</body>
</html>
